{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOME - ONLY FLAN</title>
    {% include 'web/componentes/scripts.html' %}
</head>
<body class="d-flex flex-column style="background-color: #fff3cd; min-vh-100">

    {% include 'web/componentes/navbar.html' %}
    
    <main class="flex-grow-1">

        {# INICIO: Banner "Flanes Premium" #}
        {% if not user.is_authenticated %}
        <div class="container my-5 p-4 rounded shadow-lg text-center" style="background-color: #fff3cd; border-left: 5px solid #ffc107;">
            <div class="row align-items-center">
                <div class="col-md-2 d-none d-md-block">
                    <img src="media/productos/2.png" alt="Imagen de Flan" class="img-fluid rounded-circle">
                </div>
                <div class="col-md-8">
                    <h2 class="text-warning mb-3">¡Acceso Exclusivo!</h2>
                    <p class="lead text-dark">
                        <a href="{% url 'login'%}">Iniciar Sesión</a> o <a href="{% url 'register'%}">Registrate</a> para acceder a nuestra colección exclusiva de **Flanes Premium** y disfrutar de sabores únicos.
                    </p>
                    
                </div>
                <div class="col-md-2 d-none d-md-block">
                    <img src="media/productos/1.png" alt="Imagen de Flan" class="img-fluid rounded-circle">
                </div>
            </div>
        </div>
        {% endif %}
        {# FIN: Banner "Flanes Premium" #}

        <div class="container py-5">
            <h1 class="mb-4 text-center">Flanes Disponibles</h1>
            <p class="lead text-center text-muted mb-5">
                Nuestra selección artesanal de flanes te espera. Cada uno de ellos está preparado con los ingredientes más frescos y siguiendo recetas tradicionales, ¡perfectos para satisfacer cualquier antojo dulce! Sumérgete en un mundo de texturas suaves y sabores irresistibles. **¡Regístrate hoy mismo y desbloquea el acceso a nuestros exclusivos Flanes Premium!**
            </p>
            <div class="row">
                {% for flan in flanes %}
                <!-- Cada tarjeta ocupará 12 columnas en móvil, 6 en tablet y 3 en PC -->
                <div class="col-12 col-md-6 col-lg-3 mb-4">
                    <div class="card h-100 shadow-sm">
                        <!-- La imagen del flan, adaptándose al tamaño de la tarjeta -->
                        <img src="{{ flan.imagen.url }}" class="card-img-top" alt="Imagen de {{ flan.nombre_producto }}">
                        <div class="card-body d-flex flex-column">
                            <!-- Nombre del producto como título de la tarjeta -->
                            <h5 class="card-title">{{ flan.nombre_producto }}</h5>
                            <!-- Descripción del producto, ahora truncada a 30 caracteres -->
                            <p class="card-text flex-grow-1">{{ flan.descripcion|truncatechars:30 }}</p>
                            <!-- Precio del flan -->
                            <h6 class="text-muted mb-2">Precio: ${{ flan.precio }}</h6>
                            <!-- Indicador de stock -->
                            {% if flan.stock > 0 %}
                                <span class="badge bg-success mb-3">En Stock: {{ flan.stock }}</span>
                            {% else %}
                                <span class="badge bg-danger mb-3">Agotado</span>
                            {% endif %}
                            <!-- Botón para ver detalles, alineado al final de la tarjeta -->
                            <a href="{% url 'detalle' flan.id %}" class="btn btn-primary mt-auto">Ver Detalles</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </main>

    {% include 'web/componentes/footer.html' %}
</body>
</html>
